import{r as t,u as y,A as E,a as L,j as e,S,L as d}from"./index-c485ecbb.js";import{c as F,a as c,F as k,b as U,E as x,d as m}from"./index.esm-37229148.js";import{a as C}from"./js.cookie-edb2da2a.js";function A(){const[u,h]=t.useState(!1),[r,o]=t.useState(!1),[s,l]=t.useState(),p=y(),{login:g,logout:b}=E(),n="p-2 border-[1px] border-gray-400 rounded-lg outline-blue-200 shadow-lg w-full valid:border-blue-900 invalid:border-red-400";t.useEffect(()=>{C.get("jwtExist")&&L.get("/api/users/getUserFromJwt").then(a=>{l(a.data.user)}).catch(a=>console.warn(a))},[]);const j={username:"",password:""},w=F().shape({username:c().min(3).max(20).required(),password:c().required()}),f=async i=>{try{console.log(),o(!0),await g(i),console.log("user loged in successfully"),console.log("user data gotten from login",localStorage.getItem("user")),o(!1),p("/layouts")}catch(a){console.log("error",a),o(!1),h(!0)}},N=()=>e.jsx("div",{children:e.jsx(k,{initialValues:j,onSubmit:f,validationSchema:w,children:e.jsxs(U,{className:"container flex flex-col gap-3 w-3/12 min-w-fit mx-auto p-6 rounded-lg bg-white backdrop-blur-sm drop-shadow-sm ",children:[e.jsx("p",{className:"font-bold text-2xl ",children:"Login"}),e.jsx("hr",{className:"w-1/4 h-[2px] bg-gray-400 border-0 rounded"}),u&&e.jsx("div",{className:"text-xs text-red-700",children:"User not exist"}),e.jsx("label",{className:"text-left",children:"Username:"}),e.jsx(x,{name:"username",component:"span",className:"text-xs text-red-700"}),e.jsx(m,{name:"username",type:"text",placeholder:"Vlados",className:n}),e.jsx("label",{children:"Password:"}),e.jsx(x,{name:"password",component:"span",className:"text-xs text-red-700"}),e.jsx(m,{name:"password",type:"password",placeholder:"Password",className:n}),e.jsx("div",{className:"h-4 invisible "}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",disabled:r,className:"w-2/4 p-2 mx-12 bg-blue-500 rounded-full hover:bg-blue-700 hover:text-white",children:r?e.jsx(S,{width:"20",color:"white"}):"Login"}),e.jsx(d,{to:"/signup",children:e.jsx("span",{className:"font-bold text-blue-700",children:"signup"})})]})]})})}),v=()=>e.jsxs("div",{className:"flex flex-col gap-3 w-3/12 min-w-[350px] mx-auto p-6 rounded-lg border-2  backdrop-blur-md drop-shadow-sm bg-white",children:[e.jsx("p",{className:"font-bold text-2xl",children:"Log in"}),e.jsx("hr",{className:"w-1/4 h-[2px] bg-gray-400 border-0 rounded"}),e.jsxs(d,{to:"/layouts",className:"p-3 border-2 border-blue-300 rounded hover:bg-sky-200 hover:cursor-pointer",children:[e.jsx("p",{className:"font-bold text-xl",children:s==null?void 0:s.username}),e.jsx("p",{className:"text-xs text-blue-700",children:s==null?void 0:s.email})]}),e.jsx("button",{onClick:()=>{b(),l(void 0)},className:"ml-auto w-fit text-xs hover:cursor-pointer hover:text-blue-700",children:"Choose another account"})]});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"relative min-h-[100vh] top-[30vh]",children:s?e.jsx(v,{}):e.jsx(N,{})})})}export{A as default};
