import{r as t,u as v,A as E,a as y,j as e,S as L,L as d}from"./index-f8ce0361.js";import{c as S,a as c,F,b as k,E as x,d as m}from"./index.esm-401c4d7c.js";import{a as U}from"./js.cookie-edb2da2a.js";function q(){const[u,p]=t.useState(!1),[o,a]=t.useState(!1),[s,l]=t.useState(),h=v(),{login:b}=E(),n="p-2 border-[1px] border-gray-400 rounded-lg outline-blue-200 shadow-lg w-full valid:border-blue-900 invalid:border-red-400";t.useEffect(()=>{U.get("jwtExist")&&y.get("/api/users/getUserFromJwt").then(r=>{l(r.data.user)})},[]);const g={username:"",password:""},j=S().shape({username:c().min(3).max(20).required(),password:c().required()}),f=async i=>{try{console.log(),a(!0),await b(i),console.log("user loged in successfully"),console.log("user data gotten from login",localStorage.getItem("user")),a(!1),h("/layouts")}catch(r){console.log("error",r),a(!1),p(!0)}},w=()=>e.jsx("div",{children:e.jsx(F,{initialValues:g,onSubmit:f,validationSchema:j,children:e.jsxs(k,{className:"container flex flex-col gap-3 w-3/12 min-w-fit mx-auto p-6 rounded-lg border-2 border-blue-400 backdrop-blur-sm drop-shadow-sm ",children:[e.jsx("p",{className:"font-bold text-2xl ",children:"Login"}),e.jsx("hr",{}),u&&e.jsx("div",{className:"text-xs text-red-700",children:"User not exist"}),e.jsx("label",{className:"text-left",children:"Username:"}),e.jsx(x,{name:"username",component:"span",className:"text-xs text-red-700"}),e.jsx(m,{name:"username",type:"text",placeholder:"Vlados",className:n}),e.jsx("label",{children:"Password:"}),e.jsx(x,{name:"password",component:"span",className:"text-xs text-red-700"}),e.jsx(m,{name:"password",type:"password",placeholder:"Password",className:n}),e.jsx("div",{className:"h-4 invisible "}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",disabled:o,className:"w-2/4 p-2 mx-12 bg-blue-500 rounded-full hover:bg-blue-700 hover:text-white",children:o?e.jsx(L,{width:"20",color:"white"}):"Login"}),e.jsx(d,{to:"/signup",children:e.jsx("span",{className:"font-bold text-blue-700",children:"signup"})})]})]})})}),N=()=>e.jsxs("div",{className:"flex flex-col gap-3 w-3/12 min-w-[350px] mx-auto p-6 rounded-lg border-2 border-blue-400 backdrop-blur-md drop-shadow-sm bg-white/20",children:[e.jsx("p",{className:"font-bold text-2xl",children:"Log in"}),e.jsx("hr",{}),e.jsxs(d,{to:"/layouts",className:"p-3 border-2 border-blue-300 rounded hover:bg-sky-200 hover:cursor-pointer",children:[e.jsx("p",{className:"font-bold text-xl",children:s==null?void 0:s.username}),e.jsx("p",{className:"text-xs text-blue-700",children:s==null?void 0:s.email})]}),e.jsx("button",{onClick:()=>l(void 0),className:"ml-auto w-fit text-xs hover:cursor-pointer hover:text-blue-700",children:"Choose another account"})]});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"relative min-h-[100vh] top-60",children:s?e.jsx(N,{}):e.jsx(w,{})})})}export{q as default};
